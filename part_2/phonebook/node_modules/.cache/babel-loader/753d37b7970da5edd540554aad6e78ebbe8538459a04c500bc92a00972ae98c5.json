{"ast":null,"code":"import _objectSpread from\"/home/salojoki/FullStackOpen/part_2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/salojoki/FullStackOpen/part_2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import Persons from'./components/Persons';import personService from'./services/personService';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var person=persons.find(function(person){return person.name===newName;});var changedPerson=_objectSpread(_objectSpread({},person),{},{number:newNumber});var personsToShow=newFilter?persons.filter(function(person){return person.name.toLowerCase().includes(newFilter.toLowerCase());}):persons;useEffect(function(){personService.getAll().then(function(response){setPersons(response);});},[]);var addName=function addName(event){event.preventDefault();var personObject={name:newName,number:newNumber};if(persons.some(function(person){return person['name']===newName;})){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){personService.update(person.id,changedPerson).then(function(response){setPersons(persons.map(function(person){return person.name!==newName?person:response;}));setNewName('');setNewNumber('');setNotificationMessage({message:\"\".concat(person.name,\" is now updated!\"),type:'notification'});handleTimeOut();});}}else{personService.create(personObject).then(function(response){setPersons(persons.concat(response));setNewName('');setNewNumber('');setNotificationMessage({message:\"\".concat(newName,\" was added to the phonebook!\"),type:'notification'});handleTimeOut();}).catch(function(error){setNotificationMessage({message:error.response.data.error,type:'error'});handleTimeOut();}).catch(function(error){console.log(error.response.data,'hello world');});}};var handlePersonDelete=function handlePersonDelete(person){if(window.confirm(\"Delete \".concat(person.name,\"?\"))){personService.remove(person.id).then(function(){setPersons(persons.filter(function(name){return name.id!==person.id;}));setNotificationMessage({message:\"\".concat(person.name,\" was deleted to the phonebook!\"),type:'notification'});handleTimeOut();}).catch(function(error){setNotificationMessage({message:\"Information of \".concat(person.name,\" has already been removed from the server!\"),type:'error'});handleTimeOut();});}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setNewFilter(event.target.value);};var handleTimeOut=function handleTimeOut(){setTimeout(function(){setNotificationMessage(null);},5000);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,{text:notificationMessage,type:true}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Filter,{newFilter:newFilter,handleFilterChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addName:addName,newName:newName,handleFilterChange:handleFilterChange,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,handlePersonDelete:handlePersonDelete})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Filter","PersonForm","Persons","personService","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notificationMessage","setNotificationMessage","person","find","name","changedPerson","number","personsToShow","filter","toLowerCase","includes","getAll","then","response","addName","event","preventDefault","personObject","some","window","confirm","update","id","map","message","type","handleTimeOut","create","concat","catch","error","data","console","log","handlePersonDelete","remove","handleNameChange","target","value","handleNumberChange","handleFilterChange","setTimeout"],"sources":["/home/salojoki/FullStackOpen/part_2/phonebook/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/personService'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(null)\n\n  const person = persons.find(person => person.name === newName)\n  const changedPerson = { ...person, number: newNumber}\n  const personsToShow = newFilter\n    ? persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n    : persons\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n  }, [])\n\n  const addName = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(person => person['name'] === newName)) {\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n          personService\n          .update(person.id, changedPerson)\n          .then(response => {\n            setPersons(\n              persons.map(person => person.name !== newName\n              ? person\n              : response))\n            setNewName('')\n            setNewNumber('')\n            setNotificationMessage({message: `${person.name} is now updated!`, type: 'notification'})\n            handleTimeOut()\n          })\n        }\n      }\n    else {\n      personService\n      .create(personObject)\n      .then(response => {\n        setPersons(persons.concat(response))\n        setNewName('')\n        setNewNumber('')\n        setNotificationMessage({message: `${newName} was added to the phonebook!`, type: 'notification'})\n        handleTimeOut()\n      }).catch(error => {\n        setNotificationMessage({message: error.response.data.error, type: 'error'})\n        handleTimeOut()\n      }).catch(error => {console.log(error.response.data, 'hello world')})\n    }\n  }\n\n  const handlePersonDelete = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n        personService\n        .remove(person.id)\n        .then(() => {\n          setPersons(persons.filter(name => name.id !== person.id ))\n          setNotificationMessage({message: `${person.name} was deleted to the phonebook!`, type: 'notification'})\n          handleTimeOut()\n        }).catch(error => {\n          setNotificationMessage({message: `Information of ${person.name} has already been removed from the server!`, type: 'error'})\n          handleTimeOut()\n        })\n      }\n    }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const handleTimeOut = () => {\n    setTimeout(() => {\n            setNotificationMessage(null)\n    }, 5000)\n  }\n\n   return (\n    <div>\n      <Notification text={notificationMessage} type/>\n      <h2>Phonebook</h2>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n      <h3>Add a new</h3>\n      <PersonForm addName={addName}\n                  newName={newName}\n                  handleFilterChange={handleFilterChange}\n                  handleNameChange={handleNameChange}\n                  newNumber={newNumber}\n                  handleNumberChange={handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons personsToShow={personsToShow} handlePersonDelete={handlePersonDelete}/>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}